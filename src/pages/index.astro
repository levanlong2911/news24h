---
import BaseLayout from '../layouts/BaseLayout.astro';
import Content from '../components/Content.astro';
import Sidebar from '../components/Sidebar.astro';
import { fetchPosts, fetchAds } from '../lib/api';
import type { Post } from '../types';

// Fallback
const emptyList: Post[] = [];
const emptyAds = {};

// Fetch posts + ads
const [posts, ads] = await Promise.all([
  fetchPosts(),
  fetchAds(),
]);

const pageTitle = 'Home';
---

<BaseLayout pageTitle={pageTitle}>
	<div class="grid-container">
		<Content posts={posts} ads={ads} />
		<Sidebar posts={posts} />
	</div>
</BaseLayout>
